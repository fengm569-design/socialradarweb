<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CSV åˆ†æ - ç¤¾ä¼šé›·è¾¾</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
/* === å…¨å±€æ ·å¼ === */
:root{--bg:#f9fafb;--panel:#ffffff;--muted:#4b5563;--text:#111827;--accent:#0ea5e9;--border:#e5e7eb;--card:#ffffff;}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:15px/1.6 system-ui,sans-serif}
a{color:var(--accent);text-decoration:none}
.container{max-width:1080px;margin:0 auto;padding:24px}
header{position:sticky;top:0;background:rgba(255,255,255,.9);backdrop-filter:blur(10px);border-bottom:1px solid var(--border);z-index:10}
.nav{display:flex;align-items:center;justify-content:space-between}
.brand{font-weight:800;letter-spacing:.3px}
.menu{display:flex;gap:14px}
.menu a{padding:10px 12px;border-radius:10px;color:var(--text)}
.menu a.active{background:var(--accent);color:#fff}
.menu a:hover:not(.active){background:rgba(0,0,0,.06)}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px}
.drop{border:1px dashed var(--border);border-radius:14px;padding:32px;background:var(--bg);text-align:center;cursor:pointer}
.drop:hover{border-color:var(--accent)}
.muted{color:var(--muted)}
.btn.secondary{background:transparent;border:1px solid var(--border);color:var(--text);padding:8px 12px;border-radius:12px;cursor:pointer}
[data-theme="dark"]{--bg:#0b1220;--panel:#0e1627;--muted:#93a3b8;--text:#e6eef8;--accent:#38bdf8;--border:#1e293b;--card:#0b1530;}
[data-theme="dark"] header{background:rgba(11,18,32,.7)}
</style>
</head>
<body>

  <header>
    <div class="container nav">
      <div class="brand">ç¤¾ä¼šé›·è¾¾ Â· Social Radar</div>
      <nav class="menu">
        <a href="./index.html">æ¦‚å¿µ</a>
        <a href="data.html">çŸ¥ä¹æ•°æ®</a>
        <a href="analysis.html" class="active">CSVåˆ†æ</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section>
      <h2>CSV ä¸Šä¼ ä¸åˆ†æ</h2>
      <div class="card">
        <p class="muted">å¦‚æœæ‚¨æœ‰è‡ªå®šä¹‰çš„ CSV æ•°æ®ï¼ˆæ ¼å¼å»ºè®®ï¼štimestamp, value, userï¼‰ï¼Œå¯åœ¨æ­¤ä¸Šä¼ è¿›è¡Œå¤šæ™®å‹’é¢‘ç§»æ¨¡æ‹Ÿã€‚</p>
        
        <div class="drop" id="dropArea" onclick="document.getElementById('file').click()">
          <p>ç‚¹å‡»æˆ–æ‹–æ‹½ CSV æ–‡ä»¶è‡³æ­¤</p>
          <input id="file" type="file" accept=".csv" style="display:none" />
        </div>

        <canvas id="chart" width="1024" height="300" style="width:100%;margin-top:20px;border:1px solid var(--border);border-radius:12px;display:none"></canvas>
        
        <div style="margin-top:16px; text-align:right">
           <button class="btn secondary" onclick="alert('åŠŸèƒ½å¼€å‘ä¸­...')">ä¸‹è½½è®¡ç®—ç»“æœ</button>
        </div>
      </div>
    </section>
  </main>

<script>
    // ç®€å•çš„æ–‡ä»¶ä¸Šä¼ äº¤äº’é€»è¾‘
    const fileInput = document.getElementById('file');
    const chartCanvas = document.getElementById('chart');

    fileInput.addEventListener('change', function(e) {
        if(e.target.files.length > 0) {
            const file = e.target.files[0];
            // è¿™é‡Œå¯ä»¥æ·»åŠ  CSV è§£æé€»è¾‘
            alert("å·²é€‰æ‹©æ–‡ä»¶: " + file.name + "\n(æ­¤å¤„å¯æ¥å…¥ parseCSV å‡½æ•°è¿›è¡Œå›¾è¡¨æ¸²æŸ“)");
            chartCanvas.style.display = 'block';
            // ç¤ºä¾‹ï¼šæ˜¾ç¤ºä¸€ä¸ªç©ºå›¾è¡¨
            new Chart(chartCanvas.getContext('2d'), {
                type: 'line',
                data: {
                    labels: ['T1', 'T2', 'T3', 'T4'],
                    datasets: [{ label: 'æ¨¡æ‹Ÿæ•°æ®', data: [10, 25, 40, 35], borderColor: '#0ea5e9' }]
                }
            });
        }
    });

    // ä¸»é¢˜åˆ‡æ¢
    (function(){
      const root = document.documentElement;
      const saved = localStorage.getItem('theme');
      if(saved === 'dark' || (!saved && window.matchMedia('(prefers-color-scheme: dark)').matches)) root.setAttribute('data-theme','dark');
      
      const btn = document.createElement('button');
      btn.className = 'btn secondary';
      btn.textContent = 'ğŸŒ“';
      btn.style.marginLeft = '8px';
      btn.onclick = () => {
        const isDark = root.getAttribute('data-theme') === 'dark';
        root.setAttribute('data-theme', isDark ? 'light' : 'dark');
        localStorage.setItem('theme', isDark ? 'light' : 'dark');
      };
      document.querySelector('.menu').appendChild(btn);
    })();
</script>
</body>
</html>
