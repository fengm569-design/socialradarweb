<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CSV åˆ†æ - ç¤¾ä¼šé›·è¾¾</title>

<link rel="stylesheet" href="../CSS/analysis.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

<header>
  <div class="container nav">
    <div class="brand">ç¤¾ä¼šé›·è¾¾ Â· Social Radar</div>
    <div class="menu">
      <a href="../index.html">é¦–é¡µ</a>
      
      <!-- ä¸‹æ‹‰èœå•å®¹å™¨ -->
      <div class="dropdown">
        <a href="javascript:void(0)" class="dropbtn">æ•°æ®åˆ†æ</a>
        <div class="dropdown-content">
          <a href="zhihu_data.html">çŸ¥ä¹</a>
          <a href="weibo_data.html">å¾®ä¿¡å…¬ä¼—å·</a>
          <a href="xiaohongshu.html">å°çº¢ä¹¦</a>
        </div>
      </div>

      <a href="analysis.html" class="active">CSVåˆ†æ</a>
      <a href="work.html" >æˆ‘ä»¬çš„å·¥ä½œ</a>
    </div>
  </div>
</header>

<main class="container">
  <section>
    <h2>CSV ä¸Šä¼ ä¸åˆ†æ</h2>

    <div class="card">
      <p class="muted">
        å¦‚æœæ‚¨æœ‰è‡ªå®šä¹‰çš„ CSV æ•°æ®ï¼ˆæ ¼å¼å»ºè®®ï¼štimestamp, value, userï¼‰ï¼Œ
        å¯åœ¨æ­¤ä¸Šä¼ è¿›è¡Œå¤šæ™®å‹’é¢‘ç§»æ¨¡æ‹Ÿã€‚
      </p>

      <div class="drop" id="dropArea"
           onclick="document.getElementById('file').click()">
        <p>ç‚¹å‡»æˆ–æ‹–æ‹½ CSV æ–‡ä»¶è‡³æ­¤</p>
        <input id="file" type="file" accept=".csv" style="display:none" />
      </div>

      <canvas
        id="chart"
        width="1024"
        height="300"
        style="width:100%;margin-top:20px;border:1px solid var(--border);border-radius:12px;display:none">
      </canvas>

      <div style="margin-top:16px; text-align:right">
        <button class="btn secondary" onclick="alert('åŠŸèƒ½å¼€å‘ä¸­...')">
          ä¸‹è½½è®¡ç®—ç»“æœ
        </button>
      </div>
    </div>
  </section>
</main>

<script>
// æ–‡ä»¶ä¸Šä¼ é€»è¾‘
const fileInput = document.getElementById('file');
const chartCanvas = document.getElementById('chart');

fileInput.addEventListener('change', function(e) {
  if(e.target.files.length > 0) {
    const file = e.target.files[0];

    alert(
      "å·²é€‰æ‹©æ–‡ä»¶: " + file.name +
      "\n(æ­¤å¤„å¯æ¥å…¥ parseCSV å‡½æ•°è¿›è¡Œå›¾è¡¨æ¸²æŸ“)"
    );

    chartCanvas.style.display = 'block';

    new Chart(chartCanvas.getContext('2d'), {
      type: 'line',
      data: {
        labels: ['T1','T2','T3','T4'],
        datasets: [{
          label: 'æ¨¡æ‹Ÿæ•°æ®',
          data: [10,25,40,35],
          borderColor: '#0ea5e9'
        }]
      }
    });
  }
});

// ä¸»é¢˜åˆ‡æ¢
(function(){
  const root = document.documentElement;
  const saved = localStorage.getItem('theme');

  if(
    saved === 'dark' ||
    (!saved && window.matchMedia('(prefers-color-scheme: dark)').matches)
  ){
    root.setAttribute('data-theme','dark');
  }

  const btn = document.createElement('button');
  btn.className = 'btn secondary';
  btn.textContent = 'ğŸŒ“';
  btn.style.marginLeft = '8px';

  btn.onclick = () => {
    const isDark = root.getAttribute('data-theme') === 'dark';
    root.setAttribute('data-theme', isDark ? 'light' : 'dark');
    localStorage.setItem('theme', isDark ? 'light' : 'dark');
  };

  document.querySelector('.menu').appendChild(btn);
})();
</script>

</body>
</html>
